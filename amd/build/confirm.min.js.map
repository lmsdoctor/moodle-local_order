{"version":3,"file":"confirm.min.js","sources":["../src/confirm.js"],"sourcesContent":["/*\n * @package    local_order\n * @copyright  2021 Andres, DQ.\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nconst modules = [\"jquery\", \"core/modal_factory\", \"core/modal_events\"];\ndefine(modules, function ($, ModalFactory, ModalEvents) {\n  return {\n    init: function () {\n\n      // Prevent the leave site? popup.\n      window.addEventListener('beforeunload', function (event) {\n        event.stopImmediatePropagation();\n      });\n\n      const finaldatecontent = $(\"#fitem_id_finaldate\");\n      finaldatecontent.addClass(\"d-none\");\n\n      $(\"input#id_startdate_enabled\").change(function (e) {\n        finaldatecontent.toggleClass(\"d-none\");\n        const checked = $(e).is(\":checked\");\n        $(\"input#id_finaldate_enabled\")\n          .attr(\"disabled\", checked)\n          .prop(\"checked\", false);\n      });\n\n      $(\"a.action-delete\").on(\"click\", function (e) {\n        e.preventDefault();\n        var href = $(this).attr(\"href\");\n        var trigger = $(\".create-modal\");\n        ModalFactory.create(\n          {\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: \"Delete\",\n            body: \"Do you really want to delete this record?\",\n          },\n          trigger\n        ).done(function (modal) {\n          modal.getRoot().on(ModalEvents.save, function () {\n            location.href = href;\n          });\n          modal.show();\n        });\n      });\n\n      $(\"form[name='updatestatus'] #id_submitbutton\").on(\"click\", function (e) {\n        e.preventDefault();\n\n        var trigger = $(\".create-modal\");\n        ModalFactory.create(\n          {\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: \"Update order status\",\n            body: \"Do you really want to update this order? it may result in unregistering students from their courses.\",\n          },\n          trigger\n        ).done(function (modal) {\n          modal.getRoot().on(ModalEvents.save, function () {\n            // Submit the form.\n            $(\"form\").submit();\n          });\n          modal.show();\n        });\n      });\n    },\n  };\n});\n"],"names":["define","$","ModalFactory","ModalEvents","init","window","addEventListener","event","stopImmediatePropagation","finaldatecontent","addClass","change","e","toggleClass","checked","is","attr","prop","on","preventDefault","href","this","trigger","create","type","types","SAVE_CANCEL","title","body","done","modal","getRoot","save","location","show","submit"],"mappings":";;;;;AAOAA,6BADgB,CAAC,SAAU,qBAAsB,sBACjC,SAAUC,EAAGC,aAAcC,mBAClC,CACLC,KAAM,WAGJC,OAAOC,iBAAiB,gBAAgB,SAAUC,OAChDA,MAAMC,oCAGFC,iBAAmBR,EAAE,uBAC3BQ,iBAAiBC,SAAS,UAE1BT,EAAE,8BAA8BU,QAAO,SAAUC,GAC/CH,iBAAiBI,YAAY,gBACvBC,QAAUb,EAAEW,GAAGG,GAAG,YACxBd,EAAE,8BACCe,KAAK,WAAYF,SACjBG,KAAK,WAAW,MAGrBhB,EAAE,mBAAmBiB,GAAG,SAAS,SAAUN,GACzCA,EAAEO,qBACEC,KAAOnB,EAAEoB,MAAML,KAAK,QACpBM,QAAUrB,EAAE,iBAChBC,aAAaqB,OACX,CACEC,KAAMtB,aAAauB,MAAMC,YACzBC,MAAO,SACPC,KAAM,6CAERN,SACAO,MAAK,SAAUC,OACfA,MAAMC,UAAUb,GAAGf,YAAY6B,MAAM,WACnCC,SAASb,KAAOA,QAElBU,MAAMI,aAIVjC,EAAE,8CAA8CiB,GAAG,SAAS,SAAUN,GACpEA,EAAEO,qBAEEG,QAAUrB,EAAE,iBAChBC,aAAaqB,OACX,CACEC,KAAMtB,aAAauB,MAAMC,YACzBC,MAAO,sBACPC,KAAM,wGAERN,SACAO,MAAK,SAAUC,OACfA,MAAMC,UAAUb,GAAGf,YAAY6B,MAAM,WAEnC/B,EAAE,QAAQkC,YAEZL,MAAMI"}