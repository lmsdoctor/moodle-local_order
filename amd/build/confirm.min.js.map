{"version":3,"file":"confirm.min.js","sources":["../src/confirm.js"],"sourcesContent":["/*\n * @package    local_order\n * @copyright  2021 Andres, DQ.\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nconst modules = [\"jquery\", \"core/modal_factory\", \"core/modal_events\"];\ndefine(modules, function ($, ModalFactory, ModalEvents) {\n  return {\n    init: function () {\n      /**\n       * Adds an event listener for the 'beforeunload' event, stopping immediate propagation.\n       * @param {Event} event - The event object.\n       */\n      window.addEventListener(\"beforeunload\", function (event) {\n        event.stopImmediatePropagation();\n      });\n\n      /**\n       * Shows or hides the final date based on the state of the start date checkbox.\n       */\n      function showFinalDate() {\n        // Check if the start date checkbox is checked\n        const checked = $(\"input#id_startdate_enabled\").is(\":checked\");\n\n        // Disable or enable the final date checkbox based on the start date checkbox state\n        $(\"input#id_finaldate_enabled\")\n          .prop(\"disabled\", !checked)\n          .prop(\"checked\", false);\n      }\n\n      // Initial call to showFinalDate\n      showFinalDate();\n\n      // Add a change event listener to the start date checkbox to trigger showFinalDate\n      $(\"input#id_startdate_enabled\").change(showFinalDate);\n\n      // Add a click event listener to delete action links\n      $(\"a.action-delete\").on(\"click\", function (e) {\n        e.preventDefault();\n        var href = $(this).attr(\"href\");\n        var trigger = $(\".create-modal\");\n\n        // Create a confirmation modal for deletion\n        ModalFactory.create(\n          {\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: \"Delete\",\n            body: \"Do you really want to delete this record?\",\n          },\n          trigger\n        ).done(function (modal) {\n          // Handle the save event of the modal\n          modal.getRoot().on(ModalEvents.save, function () {\n            // Redirect to the provided href on save\n            location.href = href;\n          });\n\n          // Show the modal\n          modal.show();\n        });\n      });\n\n      // Add a click event listener to the submit button of the update status form\n      $(\"form[name='updatestatus'] #id_submitbutton\").on(\"click\", function (e) {\n        e.preventDefault();\n        var trigger = $(\".create-modal\");\n\n        // Create a confirmation modal for updating order status\n        ModalFactory.create(\n          {\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: \"Update order status\",\n            body: \"Do you really want to update this order? It may result in unregistering students from their courses.\",\n          },\n          trigger\n        ).done(function (modal) {\n          // Handle the save event of the modal\n          modal.getRoot().on(ModalEvents.save, function () {\n            // Submit the form\n            $(\"form\").submit();\n          });\n\n          // Show the modal\n          modal.show();\n        });\n      });\n    },\n  };\n});\n"],"names":["define","$","ModalFactory","ModalEvents","init","showFinalDate","checked","is","prop","window","addEventListener","event","stopImmediatePropagation","change","on","e","preventDefault","href","this","attr","trigger","create","type","types","SAVE_CANCEL","title","body","done","modal","getRoot","save","location","show","submit"],"mappings":";;;;;AAOAA,6BADgB,CAAC,SAAU,qBAAsB,sBACjC,SAAUC,EAAGC,aAAcC,mBAClC,CACLC,KAAM,oBAYKC,sBAEDC,QAAUL,EAAE,8BAA8BM,GAAG,YAGnDN,EAAE,8BACCO,KAAK,YAAaF,SAClBE,KAAK,WAAW,GAdrBC,OAAOC,iBAAiB,gBAAgB,SAAUC,OAChDA,MAAMC,8BAiBRP,gBAGAJ,EAAE,8BAA8BY,OAAOR,eAGvCJ,EAAE,mBAAmBa,GAAG,SAAS,SAAUC,GACzCA,EAAEC,qBACEC,KAAOhB,EAAEiB,MAAMC,KAAK,QACpBC,QAAUnB,EAAE,iBAGhBC,aAAamB,OACX,CACEC,KAAMpB,aAAaqB,MAAMC,YACzBC,MAAO,SACPC,KAAM,6CAERN,SACAO,MAAK,SAAUC,OAEfA,MAAMC,UAAUf,GAAGX,YAAY2B,MAAM,WAEnCC,SAASd,KAAOA,QAIlBW,MAAMI,aAKV/B,EAAE,8CAA8Ca,GAAG,SAAS,SAAUC,GACpEA,EAAEC,qBACEI,QAAUnB,EAAE,iBAGhBC,aAAamB,OACX,CACEC,KAAMpB,aAAaqB,MAAMC,YACzBC,MAAO,sBACPC,KAAM,wGAERN,SACAO,MAAK,SAAUC,OAEfA,MAAMC,UAAUf,GAAGX,YAAY2B,MAAM,WAEnC7B,EAAE,QAAQgC,YAIZL,MAAMI"}