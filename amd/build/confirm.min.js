/*
 * @package    local_order
 * @copyright  2021 Andres, DQ.
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_order/confirm",["jquery","core/modal_factory","core/modal_events"],(function($,ModalFactory,ModalEvents){return{init:function(){window.addEventListener("beforeunload",(evt=>evt.stopImmediatePropagation()));const form=$("form[name='updatestatus']"),cancelButton=form.find("input#id_cancel"),submitButton=form.find("input#id_submitbutton");form.find("a.action-delete").on("click",(function(e){e.preventDefault();var href=$(this).attr("href");ModalFactory.create({type:ModalFactory.types.SAVE_CANCEL,title:"Delete",body:"Do you really want to delete this record?"},$(".create-modal")).done((function(modal){modal.getRoot().on(ModalEvents.save,(function(){location.href=href})),modal.show()}))})),cancelButton.on("click",(function(evt){evt.preventDefault();const formAction=form.attr("action-cancel");location.href=formAction})),submitButton.on("click",(function(evt){evt.preventDefault();const formAction=form.attr("action");ModalFactory.create({type:ModalFactory.types.SAVE_CANCEL,title:"Update order status",body:"Do you really want to update this order? It may result in unregistering students from their courses."},$(".create-modal")).done((function(modal){modal.getRoot().on(ModalEvents.save,(function(){form.prop("action",formAction).submit()})),modal.show()}))}))}}}));

//# sourceMappingURL=confirm.min.js.map